<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <!--
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    -->
 	<title>Analise de Viabilidade</title>
	
	<link rel="shortcut icon" href="Public/Imagens/favicon.png" />
    <link rel="stylesheet" href="Public/css/style.css">
	<link rel="stylesheet" href="Public/css/main.css">
	<link rel="stylesheet" href="Public/css/style_a.css">
    <link rel="stylesheet" href="Public/css/table.css">
    <script src="Public/js/geral.js" type="text/javascript"></script>
    <script src="Public/js/pontos.js" type="text/javascript"></script>
    <script src="https://kit.fontawesome.com/ddc0eccd46.js" crossorigin="anonymous"></script>

	<!-- Adicionado do Site 
		<link rel="stylesheet" href="Public/css/vendor.bundle.base.css">
		<link rel="stylesheet" href="Public/css/vendor.bundle.addons.css">
		<script src="Public/js/vendor.bundle.base.js"></script>
		<script src="Public/js/vendor.bundle.addons.js"></script>
	
	-->
    
    <!-- Bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.min.js" integrity="sha512-WW8/jxkELe2CAiE4LvQfwm1rajOS8PHasCCx+knHG0gBHt8EXxS6T6tJRTGuDQVnluuAvMxWF4j8SNFDKceLFg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" integrity="sha512-b2QcS5SsA8tZodcDtGRELiGv5SaKSk1vDHDaQRda0htPYWZ6046lr3kJ5bAAQdpV2mmA/4v0wQF9MyU6/pDIAg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <!--    Cookies 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" integrity="sha512-3j3VU6WC5rPQB4Ld1jnLV7Kd5xr+cq9avvhwqzbH/taCRNURoeEpoPBK9pDyeukwSxwRPJ8fDgvYXd6SkaZ2TA==" crossorigin="anonymous"></script>  -->
    <script type="text/javascript" src="Public/js/jquery.cookie.min.js" ></script>
    

    <script type="text/javascript"> 
        if(typeof jQuery === 'undefined'){
              console.log('no jQuery');
                var head = document.getElementsByTagName('head')[0];
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = 'Public/js/jquery-3.6.0.min.js';
                script.onload = handler;
                head.appendChild(script);
            }else{console.log('jQuery is embedded!');}
    function handler(){ console.log('jquery added :)'); }
    </script>
    
    <style>
       /* Set the size of the div element that contains the map */
      #map {
        height: 400px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }
    </style>
			<script defer
				src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDyfFIiEZ8FVT0-0nbNOU0qZLO3uCtEBtE&callback=initMap">
		</script>
	
    <script type="text/javascript" src="../local/conf.json"></script>
    <script type="text/javascript">
        var host = 'http://127.0.0.1:8000';
        var sdw_ambiente = "DEV";
        var sdw_owner = "DFH";
        if (conf) { var config = JSON.parse(conf); }
        if (config) {
            host = config[0].server;
            sdw_ambiente = config[0].ambiente ;
            sdw_owner = config[0].HEAD;
           }
        console.log("Ambiente : " + sdw_ambiente + " | Owner : " + sdw_owner +  " | Server : "+ host);
    </script>
	
	
	
</head>

<body onload="openWindow()">
<div>
    <nav class="nav_dfh" id="nav_dfh">
        <div>
            <a class="logo_dfh" href="http://dfhnegocios.com.br/"> <img src="Public/Imagens/DHF_logo.png" alt="logo"  /></a>
        </div>
        <div class="topo_center">
            <p style="text-align: center; font-size: 32px; color: lightskyblue"> Portal SD WAN - Adm</p>
            <!-- <p style="text-align: center; font-size: 32px; color: Silver"> Portal SD WAN - Adm</p> -->
        </div>
	</nav>
    <nav class="nav_top" id="nav_top" hidden>
        <div>
            <a class="logo" href="http://talkd.com.br/"> <img src="Public/Imagens/logo_original_final_branco.png" alt="logo"  /></a>
        </div>
        <div class="topo_center">
            <p style="text-align: center; font-size: 36px; color: ghostwhite"> Portal SD WAN - Adm</p>
        </div>
	</nav>
	<!-- Menu Principal -->
	<div>
	<div class="menu_top">
		<ul>
			<li><a href="#">Sair</a>
				<ul>
					<li><span class="topo"></span><span class="inferior"></span><a href="#">Talkd</a></li>
					<li><a href="#">DFH Engenharia</a></li>
				</ul>
			</li>
			<li><a href="portal.html">Console</a></li>
		</ul>
	</div>
		
    <div class="block_line">
        <div>&nbsp;&nbsp;</div>
        <div><label style = "width: 40px">Login</label></div>
        <div><input style = "width: 80px"  class="field" id="user_Login" type="textbox" readonly></div>
        <div><label style = "width: 40px">Nome</label></div>
        <div><input style = "width: 220px" class="field" id="user_Nome" type="textbox" readonly> </div>
        <div><label style = "width: 60px">Empresa</label></div>
        <div><input style = "width: 120px" class="field" id="user_Empresa" type="textbox" readonly></div>       
    </div>		
	<div class="block_form">
        <!--    FORM  -->
		<form>     
        <fildset>
        <!-- <p> Pesquisa</p> -->
        <label style = "width: 80px" for="sel_Empresa">Empresa</label>
            <select name = "sel_Empresa" id = "sel_Empresa" style = "width: 180px" >
                <option value="">Selecione </option>
                <option value="HUGHES">HUGHES</option>
                <option value="ALGAR">ALGAR</option>
                <option value="EMBRATEL">EMBRATEL</option>
            </select>





        <label style = "width: 40px" for="ctq_Cliente">Cliente</label>
            <input style = "width: 320px" class="field" id="pt_cliente" type="textbox" readonly hidden >
                <select style = "width: 420px" name = "ctq_Cliente" id = "ctq_Cliente"></select> <!-- Function Cria Maneu -->
        <br>
        <label style = "width: 80px" for="whe_viabilidade">Status</label>
            <select style = "width: 180px"  name = "whe_Viabilidade" id="whe_Viabilidade">
                <option value=""> Selecionar </option>
                <option value="Pendente">  Pendente </option>
                <option value="Ativado Parcial"> Parcialmente Ativo </option>
                <option value="Cancelado"> Cancelado </option>
                <option value="Ativo"> Ativo </option>
            </select>   
        <label style = "width: 40px" for="whe_Estado">Estado</label>    
            <select name = "whe_Estado" id="whe_Estado" style = "width: 180px">
                <option value=""> Selecione</option>
                <option value="AC"> Acre </option>
                <option value="AL"> Alagoas </option>
                <option value="AM"> Amazonas </option>
                <option value="AP"> Amapa </option>
                <option value="BA"> Bahia </option>
                <option value="CE"> Ceara </option>
                <option value="DF"> Distrito Federal </option>
                <option value="ES"> Espirito Santo </option>
                <option value="GO"> Goiais </option>
                <option value="MA"> Maranhão </option>
                <option value="MG"> Minas Gerais </option>
                <option value="MS"> Mato Grosso Sul </option>
                <option value="MT"> Mato Grosso </option>
                <option value="PA"> Para </option>
                <option value="PB"> Paraiba </option>
                <option value="PE"> Pernambuco </option>
                <option value="PI"> Piaui </option>
                <option value="PR"> Parana </option>
                <option value="RJ"> Rio de Janeiro </option>
                <option value="RN"> Rio Grande do Norte </option>
                <option value="RO"> Rondonia </option>
                <option value="RR"> Roraima </option>
                <option value="RS"> Rio Grande do Sul </option>
                <option value="SC"> Santa Catarina </option>
                <option value="SE"> Sergipe </option>
                <option value="SP"> São Paulo </option>
                <option value="TO"> Tocantis </option>
            </select>    
        <label style = "width: 40px" for="whe_Cidade">Cidade</label>
            <select name = "whe_Cidade" id="whe_Cidade" style = "width: 220px" ></select>

        <input class="button button1" type="button" value="Pesquisar" onclick="load_pontos()"> 
            <br>
                
    <!--    Lista Pontos  -->

            <div  id="mytable" style = "width: 100%" class="table table-striped table-bordered table-sm" ></div>
            <!--    
            <div  id="mytable" style = "overflow-y: scroll; height:226px; width: 100%; word-wrap: break-word ; table-layout:fixed " class="table table-striped table-bordered table-sm" ></div>
                -->
                
        <hr>
       <div style = "padding-left: 84px ; display: inline-block;">
            <input class="button button4" type="button" id="btExcluir" value="Excluir Ponto" onclick="ExcluirPonto()">
            <input class="button button1" type="button" id="btOpenPonto" value="Detalhes do Ponto" style = "margin-left: 580px ;" onclick="Open_PontoGeral()">
    
        </div>          
        <hr>
            <label style = "width: 80px" for="pt_Tecnologia">ID</label><input style = "width: 80px" class="field" id="pt_ID" type="textbox" readonly>
            <label style = "width: 80px" for="pt_NomePonto">Identificação</label><input style = "width: 360px" class="field" id="pt_NomePonto" type="textbox" readonly>
            <span>&nbsp;&nbsp;&nbsp;</span>    
            <input type="checkbox" id="pt_shopping" disabled="disabled" > <label style = "width: 100px" for="pt_shopping" id="pt_shopping_lb">Shopping Center</label>
            <span>&nbsp;</span>
            <label style = "width: 40px" for="pt_Viabilidade">Status</label><input style = "width: 160px" class="field" id="pt_Viabilidade" type="textbox" readonly>
                <br>    
            <label style = "width: 80px" for="pt_Logradouro">Logradouro</label><input style = "width: 540px" class="field" id="pt_Logradouro" type="textbox" readonly>    
            <label style = "width: 50px" for="pt_Numero">Numero</label><input style = "width: 60px" class="field" id="pt_Numero" type="textbox" readonly>    
            <label style = "width: 80px" for="pt_Complemento">Complemento</label><input style = "width: 150px" class="field" id="pt_Complemento" type="textbox" readonly>
                <br>    
            <label style = "width: 80px" for="pt_Estado">Estado</label><input style = "width: 80px" class="field" id="pt_Estado" type="textbox" readonly>
            <label style = "width: 80px" for="pt_Cidade">Cidade</label><input style = "width: 300px" class="field" id="pt_Cidade" type="textbox" readonly>
            <label style = "width: 60px" for="pt_Bairro">Bairro</label><input style = "width: 180px" class="field" id="pt_Bairro" type="textbox" readonly>   
            <label style = "width: 70px" for="pt_CEP">CEP</label><input style = "width: 90px" class="field" id="pt_CEP" type="textbox" readonly>
                <br>
            <label style = "width: 80px" for="pt_Observacao">Observacao</label><input style = "width: 920px" class="field" id="pt_Observacao" type="textbox" readonly>
            <label style = "width: 80px" for="pt_clienteA">Cliente</label><input style = "width: 320px" class="field" id="pt_clienteA" type="textbox" readonly>
            <label style = "width: 50px" for="pt_LojaID">ID Loja</label><input style = "width: 60px" class="field" id="pt_LojaID" type="textbox" readonly>    
                <br>            

		
		
        

		<!--    Mapa Google  -->
            <div id="map"></div>
            <br>
                
            <label style = "width: 150px" for="pt_resultado">Resultado analise teórica</label><input style = "width: 820px" class="field" id="pt_resultado" type="textbox" readonly>
            <hr>



            </fildset>
        </form> 
    </div>	

 </div>
    <div class="block_form" hidden >
        <form><fislset>
            <p> Dados Internos</p>
            <label style = "width: 80px" for="pt_Tecnologia">Tecnologia</label><input style = "width: 140px" class="field" id="pt_Tecnologia" type="textbox" readonly>
            <label style = "width: 80px" for="pt_Latitude">Latitude</label><input style = "width: 120px" class="field" id="pt_Latitude" type="textbox" readonly>
            <label style = "width: 80px" for="pt_Longitude">Longitude</label><input style = "width: 120px" class="field" id="pt_Longitude" type="textbox" readonly>
            
            <label style = "width: 60px" for="pt_velocidade">Velocidade</label><input style = "width: 80px" class="field" id="pt_velocidade" type="number" readonly><i>&nbsp;&nbsp;Mbps &nbsp;&nbsp;</i>
            <br>
            <label style = "width: 120px" for="Empresa">Empresa</label><input style = "width: 120px" class="field" id="Empresa" type="textbox" readonly>
            <label style = "width: 120px" for="ct_ID">Cliente ID</label><input style = "width: 60px" class="field" id="ct_ID" type="textbox" readonly>
        </fislset></form>
    </div>
    
</div>               
        

	
<br><br><br>
<!------  ---------------------------------------JAVA SCRIPT -----------------  --->
<script type="text/javascript">	
  var geocoder;
  let map;
  var tkd_Empresa;
  var tkd_Login;

 document.getElementById("whe_Estado").addEventListener("change", function(){
     menu_Cidade();
});   
    
document.getElementById("ctq_Cliente").addEventListener("change", function(){ 
        var c_id = document.getElementById('ctq_Cliente').value;
        if (c_id != null && c_id != 0 ) { ct_ID.setAttribute("Value", c_id ) ;} else { document.getElementById('ct_ID').value = "" ;}
        //var elemento = document.getElementById('ctq_Cliente');
        //var c_nome = elemento.options[elemento.selectedIndex].innerHTML;
        //if (c_nome != null) { pt_cliente.setAttribute("Value", c_nome )};
});    
    
document.getElementById("sel_Empresa").addEventListener("change", function(){ 
        var elemento = document.getElementById('sel_Empresa');
        var c_nome = elemento.options[elemento.selectedIndex].innerHTML;
        document.getElementById('Empresa').value = c_nome ;
        
        menu_Clientes();
});

    
function openWindow(){    
    loadSession();
    menuEmpresas("sel_Empresa");

}
    
function load_pontos() {   
    const header  = document.querySelector('header');
    const section = document.querySelector('section');
	let headers = new Headers();
 	headers.append('Content-Type', 'application/json');
    headers.append('Accept', 'application/json');
    headers.append('Access-Control-Allow-Origin', '*' );
    headers.append('Access-Control-Allow-Credentials', 'true');
	headers.append('GET', 'POST', 'OPTIONS');
    headers.append('Upgrade-Insecure-Requests', '1');
	headers.append('Content-Security-Policy', 'upgrade-insecure-requests');

    // ---  Chause Where
    var empresa = document.getElementById('sel_Empresa').value;
    var whe_Viabilidade = document.getElementById('whe_Viabilidade').value;   
    var whe_Estado = document.getElementById('whe_Estado').value;   
    var whe_Cidade = document.getElementById('whe_Cidade').value;
    var whe_Cliente = document.getElementById('ct_ID').value;

	var requestURL = host + '/pontos?empresa='+empresa
    if ( whe_Viabilidade != "") { requestURL = requestURL + '&Viabilidade='+ whe_Viabilidade }; 
    if ( whe_Estado  != "" ) { requestURL = requestURL + '&Estado='+ whe_Estado }; 
    if ( whe_Cidade  != "" ) { requestURL = requestURL + '&Cidade='+ whe_Cidade }; 
    if ( whe_Cliente !== "" ) { requestURL = requestURL + '&Cliente='+whe_Cliente }; 

    console.log(requestURL);       
        
	var request = new XMLHttpRequest();
	request.open('GET', requestURL);

	request.responseType = 'json';
	request.send();	

        request.onload = function() {
            var pontos = request.response;
            g_table(pontos);	}
}

    
function g_table(jsonObj) {
	var lugares = jsonObj;	
    console.log(jsonObj);
        while (mytable.hasChildNodes()) { mytable.removeChild(mytable.lastChild); }
        var mybody = document.getElementsByTagName("pagination")[0];
       mytablebody = document.createElement("tbody");

	  // <!-- Cabeçalho da tabela -->
		t_colunas = ["ID","Identificação","Logradouro","UF","Cidade","Status","Shop",""];
		myheader=document.createElement("tr");
        
		var zcol_count = t_colunas.length;		
		for(var zcol = 0 ; zcol < zcol_count ; zcol++) { 
			mycurrent_header=document.createElement("th");
			currentheader = document.createTextNode(t_colunas[zcol]);
			mycurrent_header.appendChild(currentheader);
			myheader.appendChild(mycurrent_header);		
		}
		mytablebody.appendChild(myheader);
            for(var g_i = 0 ; g_i < lugares.length ; g_i++) {
			   mycurrent_row = document.createElement("tr"); 
               
                   mycurrent_cell = document.createElement("td");
                   mycurrent_cell.setAttribute("style", "word-wrap: break-word; font-size: 12px; width: 4%");
                   conteudo = lugares[g_i].ID;
			   	   currenttext = document.createTextNode(conteudo);
				   mycurrent_cell.appendChild(currenttext);
				   mycurrent_row.appendChild(mycurrent_cell);
                
				   mycurrent_cell = document.createElement("td");
                   mycurrent_cell.setAttribute("style", "word-wrap: break-word; font-size: 12px; width: 32%");
                   conteudo = lugares[g_i].NomePonto;
                   if ( conteudo == null ) { conteudo = "" }
				   currenttext = document.createTextNode(conteudo);
               	   mycurrent_cell.setAttribute("ID",'bt_'+conteudo);
                   //console.log(mycurrent_cell);
				   mycurrent_cell.appendChild(currenttext);
				   mycurrent_row.appendChild(mycurrent_cell);
               
				   mycurrent_cell = document.createElement("td");
                   mycurrent_cell.setAttribute("style", "word-wrap: break-word; font-size: 12px; width: 40%");
                   var rua = lugares[g_i].Logradouro;
                   if ( rua != null) { rua = rua.trim() };
                   var numero = lugares[g_i].Numero;
                   if ( numero != null) { rua = rua.trim() };
                   conteudo = rua + ", "+ numero
			   	   currenttext = document.createTextNode(conteudo);
				   mycurrent_cell.appendChild(currenttext);
				   mycurrent_row.appendChild(mycurrent_cell);		   
				   
				   mycurrent_cell = document.createElement("td");
                   mycurrent_cell.setAttribute("style", "word-wrap: break-word; font-size: 12px; width: 6%");
                   conteudo = lugares[g_i].Estado;
			   	   currenttext = document.createTextNode(conteudo);
				   mycurrent_cell.appendChild(currenttext);
				   mycurrent_row.appendChild(mycurrent_cell);
                
                   mycurrent_cell = document.createElement("td");
                   mycurrent_cell.setAttribute("style", "word-wrap: break-word; font-size: 12px; width: 20%");
                   conteudo = lugares[g_i].Cidade;
			   	   currenttext = document.createTextNode(conteudo);
				   mycurrent_cell.appendChild(currenttext);
				   mycurrent_row.appendChild(mycurrent_cell);
			   
				   mycurrent_cell = document.createElement("td");
                   mycurrent_cell.setAttribute("style", "word-wrap: break-word; font-size: 12px; width: 16%");
                   conteudo = lugares[g_i].Status;
                   if ( conteudo == null ) { conteudo = "" }
			   	   currenttext = document.createTextNode(conteudo);
				   mycurrent_cell.appendChild(currenttext);
				   mycurrent_row.appendChild(mycurrent_cell);
                
                   mycurrent_cell = document.createElement("td");
                   mycurrent_cell.setAttribute("style", "word-wrap: break-word; font-size: 10px; width: 8%");
                   conteudo = lugares[g_i].Shopping;
                   if ( conteudo == 1 ) { conteudo = "Shopping" } else { conteudo = "" }
			   	   currenttext = document.createTextNode(conteudo);
				   mycurrent_cell.appendChild(currenttext);
				   mycurrent_row.appendChild(mycurrent_cell);
               
                   mycurrent_cell = document.createElement("td");
                   mycurrent_cell.setAttribute("style", "word-wrap: break-word; font-size: 12px; width: 10%");
			   	   currenttext = document.createTextNode("");
                   mycurrent_cell.setAttribute("ID",'btn_'+(g_i+1));
                   var btn_ID = lugares[g_i].ID;
                   var click = 'clicar('+btn_ID+')';
                   mycurrent_cell.setAttribute("onclick", click);
                   mycurrent_cell.setAttribute("class", "fas fa-edit");
				   mycurrent_cell.appendChild(currenttext);
				   mycurrent_row.appendChild(mycurrent_cell);
               	   			   
			    mytablebody.appendChild(mycurrent_row);
		   }
        
       mytable.appendChild(mytablebody);
       //pagination.appendChild(mytable);
    
    }



    // Apresentar Detalhes do Ponto
function clicar(btn_id){
        var p_id = btn_id;
        //console.log(p_id);
        const header  = document.querySelector('header');
        const section = document.querySelector('section');
        let headers = new Headers();
        headers.append('Content-Type', 'application/json');
        headers.append('Accept', 'application/json');
        headers.append('Access-Control-Allow-Origin', '*' );
        headers.append('Access-Control-Allow-Credentials', 'true');
        headers.append('GET', 'POST', 'OPTIONS');
        headers.append('Upgrade-Insecure-Requests', '1');
        headers.append('Content-Security-Policy', 'upgrade-insecure-requests');
   
        var requestURL = host + '/ponto/' + btn_id ;
       // console.log(requestURL);    

        var request = new XMLHttpRequest();
		//request.setRequestHeader(headers);
        request.open('GET', requestURL);
        request.responseType = 'json';
        request.send();

        request.onload = function() {
        var pontos = request.response;	
        //console.log(pontos);    
            conteudo =   pontos[0].ID;
            if (conteudo != null) { pt_ID.setAttribute("Value", conteudo )};
            conteudo =   pontos[0].NomePonto;
            if (conteudo != null) { pt_NomePonto.setAttribute("Value", conteudo ) };
            conteudo =   pontos[0].viabilidade;
            if (conteudo != null) { pt_Viabilidade.setAttribute("Value", conteudo )};
            conteudo =   pontos[0].Logradouro;
            if (conteudo != null) { pt_Logradouro.setAttribute("Value", conteudo) };
            conteudo =   pontos[0].Numero;
            if (conteudo != null) { pt_Numero.setAttribute("Value", conteudo) };            
            conteudo =   pontos[0].Complemento;
            if (conteudo != null) { pt_Complemento.setAttribute("Value", conteudo) };  
            conteudo =   pontos[0].Estado;
            if (conteudo != null) { pt_Estado.setAttribute("Value", conteudo) };  
            conteudo =   pontos[0].Cidade;
            if (conteudo != null) { pt_Cidade.setAttribute("Value", conteudo) };            
            conteudo =   pontos[0].Bairro;
            if (conteudo != null) { pt_Bairro.setAttribute("Value", conteudo) };             
            conteudo =   pontos[0].CEP;
            if (conteudo != null) { pt_CEP.setAttribute("Value", conteudo) };             
            latitude =   pontos[0].Latitude;
            if (latitude != null) { pt_Latitude.setAttribute("Value", latitude) };             
            longitude =   pontos[0].Longitude;
            if (longitude != null) { pt_Longitude.setAttribute("Value", longitude) }; 
            conteudo =   pontos[0].Tecnologia;
            if (conteudo != null) { pt_Tecnologia.setAttribute("Value", conteudo) };            
            conteudo =   pontos[0].Velocidade;
            if (conteudo != null) { pt_Velocidade.setAttribute("Value", conteudo) };                 
            conteudo =   pontos[0].Observacao;
            if (conteudo != null) { pt_Observacao.setAttribute("Value", conteudo) };
            conteudo =   pontos[0].cliente;
            if (conteudo != null) { document.getElementById('pt_clienteA').value = conteudo }
            
            conteudo =   pontos[0].loja_id;
            if (conteudo != null) { document.getElementById('pt_LojaID').value = conteudo.trim(); } else { document.getElementById('pt_LojaID').value = "" ;}       
            
            conteudo =   pontos[0].Shopping;
            /*
            if ( conteudo == 1 ) { document.getElementById('pt_shopping').checked = true ;
                                   document.getElementById('btExcluir').hidden = true ;
                                   pt_shopping_lb.setAttribute("style", "color: red ");                                  
                                 } else { document.getElementById('pt_shopping').checked = false ;
                                          document.getElementById('btExcluir').hidden = false ;
                                          pt_shopping_lb.setAttribute("style", "color: black ");  
                                        }     
           */
            
        GeoMapp(latitude, longitude);

        }        
}

	
function GeoMapp(latitude, Longitude) {
      var latitude = latitude;
      var longitude = Longitude;
      var location  = 'center: {lat: ' + latitude + ', lng: ' + longitude + '}';
      var posicao   = 'position: {lat: ' + latitude + ', lng: ' + longitude + '}';
      var mapOp  = '{lat: ' + latitude + ', lng: ' + longitude + '}';
      const mapOptions = { zoom: 12, center: { lat: latitude , lng: longitude }, };
      map = new google.maps.Map(document.getElementById("map"), mapOptions);
      const marker = new google.maps.Marker({
        // The below line is equivalent to writing:
        // position: new google.maps.LatLng(-34.397, 150.644)
        position: { lat: latitude, lng: longitude },
        map: map,
      });
      // You can use a LatLng literal in place of a google.maps.LatLng object when
      // creating the Marker object. Once the Marker object is instantiated, its
      // position will be available as a google.maps.LatLng object. In this case,
      // we retrieve the marker's position using the
      // google.maps.LatLng.getPosition() method.
      const infowindow = new google.maps.InfoWindow({
        content: "<p>Marker Location:" + marker.getPosition() + "</p>",
      });
      google.maps.event.addListener(marker, "click", () => {
        infowindow.open(map, marker);
      });
    }

    
function Open_PontoGeral(){
    var w_id = document.getElementById('pt_ID').value;  
    if (w_id) {
        console.log(w_id);
        var URL = 'ponto_adm.html?ID='+w_id;
        console.log(URL);
        window.open( URL , "_blank");   
    };

}    
    
function ExcluirPonto(){
    var jsd_ctid = Number(document.getElementById('pt_ID').value);
    
    var jsdata = {"jsd_ctid":jsd_ctid};
    //console.log(jsdata);

    if ( jsd_ctid == "" ) { alert("Selecione primeiro um ponto para ser excluido"); return }

    var JdataS= JSON.stringify(jsdata);
    var jdata = JSON.parse(JdataS);
    const header  = document.querySelector('header');
    const section = document.querySelector('section');
    //const csrftoken = Cookies.get('csrftoken');
    let headers = new Headers();
    headers.append('Content-Type', 'application/json');
    headers.append('Accept', 'application/json');
    headers.append('Access-Control-Allow-Origin', host );
    headers.append('Access-Control-Allow-Credentials', 'true');
    headers.append('GET', 'POST','PUT', 'OPTIONS');
    headers.append('Upgrade-Insecure-Requests', '1');
    //headers.append('X-CSRFToken', csrftoken);
    var requestURL = host + '/pontoDelete/0';
    //console.log(requestURL);
    var request = new XMLHttpRequest();
    request.open('POST', requestURL, true);
    request.responseType = 'json';
    request.send(JSON.stringify(jdata));		

    request.onload = function() { var resp_post = request.response;
                                 // Trata Resposta
                                 var status = request.status;
                                 if ( status != 200 ) { alert( "Erro  : " + status.toString()) ; }
                                 else { alert("Ponto Excluido da Base")}
                        console.log(resp_post) ;
                    }
}
 
    
    
    

    

      

    
    
    
</script>
  
        
</body>
</html>
